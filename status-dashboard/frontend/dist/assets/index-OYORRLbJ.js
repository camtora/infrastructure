(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();var J,b,He,A,be,Me,Ae,Ee,de,ie,se,I={},Te=[],Ge=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,X=Array.isArray;function D(e,t){for(var n in t)e[n]=t[n];return e}function _e(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function qe(e,t,n){var s,i,l,c={};for(l in t)l=="key"?s=t[l]:l=="ref"?i=t[l]:c[l]=t[l];if(arguments.length>2&&(c.children=arguments.length>3?J.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)c[l]===void 0&&(c[l]=e.defaultProps[l]);return V(e,c,s,i,null)}function V(e,t,n,s,i){var l={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++He,__i:-1,__u:0};return i==null&&b.vnode!=null&&b.vnode(l),l}function Y(e){return e.children}function z(e,t){this.props=e,this.context=t}function U(e,t){if(t==null)return e.__?U(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?U(e):null}function Ue(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ue(e)}}function we(e){(!e.__d&&(e.__d=!0)&&A.push(e)&&!G.__r++||be!=b.debounceRendering)&&((be=b.debounceRendering)||Me)(G)}function G(){for(var e,t,n,s,i,l,c,d=1;A.length;)A.length>d&&A.sort(Ae),e=A.shift(),d=A.length,e.__d&&(n=void 0,s=void 0,i=(s=(t=e).__v).__e,l=[],c=[],t.__P&&((n=D({},s)).__v=s.__v+1,b.vnode&&b.vnode(n),ue(t.__P,n,s,t.__n,t.__P.namespaceURI,32&s.__u?[i]:null,l,i??U(s),!!(32&s.__u),c),n.__v=s.__v,n.__.__k[n.__i]=n,Be(l,n,c),s.__e=s.__=null,n.__e!=i&&Ue(n)));G.__r=0}function Fe(e,t,n,s,i,l,c,d,h,a,_){var o,u,p,x,y,w,m,g=s&&s.__k||Te,$=t.length;for(h=Je(n,t,g,h,$),o=0;o<$;o++)(p=n.__k[o])!=null&&(u=p.__i==-1?I:g[p.__i]||I,p.__i=o,w=ue(e,p,u,i,l,c,d,h,a,_),x=p.__e,p.ref&&u.ref!=p.ref&&(u.ref&&he(u.ref,null,p),_.push(p.ref,p.__c||x,p)),y==null&&x!=null&&(y=x),(m=!!(4&p.__u))||u.__k===p.__k?h=Ie(p,h,e,m):typeof p.type=="function"&&w!==void 0?h=w:x&&(h=x.nextSibling),p.__u&=-7);return n.__e=y,h}function Je(e,t,n,s,i){var l,c,d,h,a,_=n.length,o=_,u=0;for(e.__k=new Array(i),l=0;l<i;l++)(c=t[l])!=null&&typeof c!="boolean"&&typeof c!="function"?(typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?c=e.__k[l]=V(null,c,null,null,null):X(c)?c=e.__k[l]=V(Y,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?c=e.__k[l]=V(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):e.__k[l]=c,h=l+u,c.__=e,c.__b=e.__b+1,d=null,(a=c.__i=Xe(c,n,h,o))!=-1&&(o--,(d=n[a])&&(d.__u|=2)),d==null||d.__v==null?(a==-1&&(i>_?u--:i<_&&u++),typeof c.type!="function"&&(c.__u|=4)):a!=h&&(a==h-1?u--:a==h+1?u++:(a>h?u--:u++,c.__u|=4))):e.__k[l]=null;if(o)for(l=0;l<_;l++)(d=n[l])!=null&&!(2&d.__u)&&(d.__e==s&&(s=U(d)),Re(d,d));return s}function Ie(e,t,n,s){var i,l;if(typeof e.type=="function"){for(i=e.__k,l=0;i&&l<i.length;l++)i[l]&&(i[l].__=e,t=Ie(i[l],t,n,s));return t}e.__e!=t&&(s&&(t&&e.type&&!t.parentNode&&(t=U(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Xe(e,t,n,s){var i,l,c,d=e.key,h=e.type,a=t[n],_=a!=null&&(2&a.__u)==0;if(a===null&&d==null||_&&d==a.key&&h==a.type)return n;if(s>(_?1:0)){for(i=n-1,l=n+1;i>=0||l<t.length;)if((a=t[c=i>=0?i--:l++])!=null&&!(2&a.__u)&&d==a.key&&h==a.type)return c}return-1}function ve(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Ge.test(t)?n:n+"px"}function O(e,t,n,s,i){var l,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||ve(e.style,t,"");if(n)for(t in n)s&&n[t]==s[t]||ve(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")l=t!=(t=t.replace(Ee,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+l]=n,n?s?n.u=s.u:(n.u=de,e.addEventListener(t,l?se:ie,l)):e.removeEventListener(t,l?se:ie,l);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ye(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=de++;else if(t.t<n.u)return;return n(b.event?b.event(t):t)}}}function ue(e,t,n,s,i,l,c,d,h,a){var _,o,u,p,x,y,w,m,g,$,P,v,N,F,H,M,E,L=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(h=!!(32&n.__u),l=[d=t.__e=n.__e]),(_=b.__b)&&_(t);e:if(typeof L=="function")try{if(m=t.props,g="prototype"in L&&L.prototype.render,$=(_=L.contextType)&&s[_.__c],P=_?$?$.props.value:_.__:s,n.__c?w=(o=t.__c=n.__c).__=o.__E:(g?t.__c=o=new L(m,P):(t.__c=o=new z(m,P),o.constructor=L,o.render=Qe),$&&$.sub(o),o.state||(o.state={}),o.__n=s,u=o.__d=!0,o.__h=[],o._sb=[]),g&&o.__s==null&&(o.__s=o.state),g&&L.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=D({},o.__s)),D(o.__s,L.getDerivedStateFromProps(m,o.__s))),p=o.props,x=o.state,o.__v=t,u)g&&L.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),g&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(g&&L.getDerivedStateFromProps==null&&m!==p&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(m,P),t.__v==n.__v||!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(m,o.__s,P)===!1){for(t.__v!=n.__v&&(o.props=m,o.state=o.__s,o.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(f){f&&(f.__=t)}),v=0;v<o._sb.length;v++)o.__h.push(o._sb[v]);o._sb=[],o.__h.length&&c.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(m,o.__s,P),g&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(p,x,y)})}if(o.context=P,o.props=m,o.__P=e,o.__e=!1,N=b.__r,F=0,g){for(o.state=o.__s,o.__d=!1,N&&N(t),_=o.render(o.props,o.state,o.context),H=0;H<o._sb.length;H++)o.__h.push(o._sb[H]);o._sb=[]}else do o.__d=!1,N&&N(t),_=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++F<25);o.state=o.__s,o.getChildContext!=null&&(s=D(D({},s),o.getChildContext())),g&&!u&&o.getSnapshotBeforeUpdate!=null&&(y=o.getSnapshotBeforeUpdate(p,x)),M=_,_!=null&&_.type===Y&&_.key==null&&(M=Oe(_.props.children)),d=Fe(e,X(M)?M:[M],t,n,s,i,l,c,d,h,a),o.base=t.__e,t.__u&=-161,o.__h.length&&c.push(o),w&&(o.__E=o.__=null)}catch(f){if(t.__v=null,h||l!=null)if(f.then){for(t.__u|=h?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;l[l.indexOf(d)]=null,t.__e=d}else{for(E=l.length;E--;)_e(l[E]);oe(t)}else t.__e=n.__e,t.__k=n.__k,f.then||oe(t);b.__e(f,t,n)}else l==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):d=t.__e=Ye(n.__e,t,n,s,i,l,c,h,a);return(_=b.diffed)&&_(t),128&t.__u?void 0:d}function oe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(oe)}function Be(e,t,n){for(var s=0;s<n.length;s++)he(n[s],n[++s],n[++s]);b.__c&&b.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(l){l.call(i)})}catch(l){b.__e(l,i.__v)}})}function Oe(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:X(e)?e.map(Oe):D({},e)}function Ye(e,t,n,s,i,l,c,d,h){var a,_,o,u,p,x,y,w=n.props||I,m=t.props,g=t.type;if(g=="svg"?i="http://www.w3.org/2000/svg":g=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),l!=null){for(a=0;a<l.length;a++)if((p=l[a])&&"setAttribute"in p==!!g&&(g?p.localName==g:p.nodeType==3)){e=p,l[a]=null;break}}if(e==null){if(g==null)return document.createTextNode(m);e=document.createElementNS(i,g,m.is&&m),d&&(b.__m&&b.__m(t,l),d=!1),l=null}if(g==null)w===m||d&&e.data==m||(e.data=m);else{if(l=l&&J.call(e.childNodes),!d&&l!=null)for(w={},a=0;a<e.attributes.length;a++)w[(p=e.attributes[a]).name]=p.value;for(a in w)if(p=w[a],a!="children"){if(a=="dangerouslySetInnerHTML")o=p;else if(!(a in m)){if(a=="value"&&"defaultValue"in m||a=="checked"&&"defaultChecked"in m)continue;O(e,a,null,p,i)}}for(a in m)p=m[a],a=="children"?u=p:a=="dangerouslySetInnerHTML"?_=p:a=="value"?x=p:a=="checked"?y=p:d&&typeof p!="function"||w[a]===p||O(e,a,p,w[a],i);if(_)d||o&&(_.__html==o.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(o&&(e.innerHTML=""),Fe(t.type=="template"?e.content:e,X(u)?u:[u],t,n,s,g=="foreignObject"?"http://www.w3.org/1999/xhtml":i,l,c,l?l[0]:n.__k&&U(n,0),d,h),l!=null)for(a=l.length;a--;)_e(l[a]);d||(a="value",g=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[a]||g=="progress"&&!x||g=="option"&&x!=w[a])&&O(e,a,x,w[a],i),a="checked",y!=null&&y!=e[a]&&O(e,a,y,w[a],i))}return e}function he(e,t,n){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&t==null||(e.__u=e(t))}else e.current=t}catch(i){b.__e(i,n)}}function Re(e,t,n){var s,i;if(b.unmount&&b.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||he(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){b.__e(l,t)}s.base=s.__P=null}if(s=e.__k)for(i=0;i<s.length;i++)s[i]&&Re(s[i],t,n||typeof e.type!="function");n||_e(e.__e),e.__c=e.__=e.__e=void 0}function Qe(e,t,n){return this.constructor(e,n)}function Ze(e,t,n){var s,i,l,c;t==document&&(t=document.documentElement),b.__&&b.__(e,t),i=(s=!1)?null:t.__k,l=[],c=[],ue(t,e=t.__k=qe(Y,null,[e]),i||I,I,t.namespaceURI,i?null:t.firstChild?J.call(t.childNodes):null,l,i?i.__e:t.firstChild,s,c),Be(l,e,c)}J=Te.slice,b={__e:function(e,t,n,s){for(var i,l,c;t=t.__;)if((i=t.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(e)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,s||{}),c=i.__d),c)return i.__E=i}catch(d){e=d}throw e}},He=0,z.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=D({},this.state),typeof e=="function"&&(e=e(D({},n),this.props)),e&&D(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),we(this))},z.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),we(this))},z.prototype.render=Y,A=[],Me=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ae=function(e,t){return e.__v.__b-t.__v.__b},G.__r=0,Ee=/(PointerCapture)$|Capture$/i,de=0,ie=ye(!1),se=ye(!0);var et=0;function r(e,t,n,s,i,l){t||(t={});var c,d,h=t;if("ref"in h)for(d in h={},t)d=="ref"?c=t[d]:h[d]=t[d];var a={type:e,props:h,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--et,__i:-1,__u:0,__source:i,__self:l};if(typeof e=="function"&&(c=e.defaultProps))for(d in c)h[d]===void 0&&(h[d]=c[d]);return b.vnode&&b.vnode(a),a}var q,k,te,ke,ce=0,Ve=[],C=b,Ce=C.__b,Se=C.__r,$e=C.diffed,Pe=C.__c,Le=C.unmount,je=C.__;function ze(e,t){C.__h&&C.__h(k,e,ce||t),ce=0;var n=k.__H||(k.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function S(e){return ce=1,tt(Ke,e)}function tt(e,t,n){var s=ze(q++,2);if(s.t=e,!s.__c&&(s.__=[Ke(void 0,t),function(d){var h=s.__N?s.__N[0]:s.__[0],a=s.t(h,d);h!==a&&(s.__N=[a,s.__[1]],s.__c.setState({}))}],s.__c=k,!k.__f)){var i=function(d,h,a){if(!s.__c.__H)return!0;var _=s.__c.__H.__.filter(function(u){return!!u.__c});if(_.every(function(u){return!u.__N}))return!l||l.call(this,d,h,a);var o=s.__c.props!==d;return _.forEach(function(u){if(u.__N){var p=u.__[0];u.__=u.__N,u.__N=void 0,p!==u.__[0]&&(o=!0)}}),l&&l.call(this,d,h,a)||o};k.__f=!0;var l=k.shouldComponentUpdate,c=k.componentWillUpdate;k.componentWillUpdate=function(d,h,a){if(this.__e){var _=l;l=void 0,i(d,h,a),l=_}c&&c.call(this,d,h,a)},k.shouldComponentUpdate=i}return s.__N||s.__}function K(e,t){var n=ze(q++,3);!C.__s&&lt(n.__H,t)&&(n.__=e,n.u=t,k.__H.__h.push(n))}function rt(){for(var e;e=Ve.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(W),e.__H.__h.forEach(ae),e.__H.__h=[]}catch(t){e.__H.__h=[],C.__e(t,e.__v)}}C.__b=function(e){k=null,Ce&&Ce(e)},C.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),je&&je(e,t)},C.__r=function(e){Se&&Se(e),q=0;var t=(k=e.__c).__H;t&&(te===k?(t.__h=[],k.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(W),t.__h.forEach(ae),t.__h=[],q=0)),te=k},C.diffed=function(e){$e&&$e(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Ve.push(t)!==1&&ke===C.requestAnimationFrame||((ke=C.requestAnimationFrame)||nt)(rt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),te=k=null},C.__c=function(e,t){t.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(s){return!s.__||ae(s)})}catch(s){t.some(function(i){i.__h&&(i.__h=[])}),t=[],C.__e(s,n.__v)}}),Pe&&Pe(e,t)},C.unmount=function(e){Le&&Le(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{W(s)}catch(i){t=i}}),n.__H=void 0,t&&C.__e(t,n.__v))};var Ne=typeof requestAnimationFrame=="function";function nt(e){var t,n=function(){clearTimeout(s),Ne&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(n,35);Ne&&(t=requestAnimationFrame(n))}function W(e){var t=k,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),k=t}function ae(e){var t=k;e.__c=e.__(),k=t}function lt(e,t){return!e||e.length!==t.length||t.some(function(n,s){return n!==e[s]})}function Ke(e,t){return typeof t=="function"?t(e):t}function it({status:e,lastUpdate:t,adminAuth:n}){const s=(e==null?void 0:e.overall_status)||"unknown",i=(e==null?void 0:e.summary)||{},l={healthy:{color:"text-emerald-400",bg:"bg-emerald-400",glow:"glow-emerald",label:"All Systems Operational",pulse:"status-pulse-green"},degraded:{color:"text-amber-400",bg:"bg-amber-400",glow:"",label:"Partial Outage",pulse:""},unhealthy:{color:"text-red-400",bg:"bg-red-500",glow:"glow-red",label:"Major Outage",pulse:"status-pulse-red"},unknown:{color:"text-white/50",bg:"bg-white/30",glow:"",label:"Status Unknown",pulse:""}},c=l[s]||l.unknown;return r("header",{class:"mb-10",children:r("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6",children:[r("div",{children:[r("h1",{class:"text-3xl font-light text-white mb-3 tracking-tight",children:[r("span",{class:"gradient-text font-medium",children:"CAM TORA"}),r("span",{class:"text-white/40 mx-2",children:"|"}),r("span",{class:"text-white/60",children:"Status"})]}),r("div",{class:"flex items-center gap-3",children:[r("span",{class:`w-3 h-3 rounded-full ${c.bg} ${c.pulse} ${c.glow}`}),r("span",{class:`text-sm font-medium ${c.color}`,children:c.label})]})]}),r("div",{class:"flex items-center gap-6",children:[r("div",{class:"text-right",children:[r("p",{class:"text-white/70 text-sm font-medium",children:[i.services_up||0," / ",i.services_total||0,r("span",{class:"text-white/40 ml-1",children:"services up"})]}),t&&r("p",{class:"text-white/40 text-xs mt-1",children:["Updated ",t.toLocaleTimeString()]})]}),(n==null?void 0:n.is_admin)&&r("div",{class:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-violet-500/10 border border-violet-500/20",children:[r("svg",{class:"w-3.5 h-3.5 text-violet-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),r("span",{class:"text-xs text-violet-300",children:"Admin"})]})]})]})})}function st(){return r("div",{class:"bg-gradient-to-r from-amber-600/90 to-amber-500/90 backdrop-blur-sm border-b border-amber-400/50",children:r("div",{class:"max-w-7xl mx-auto py-4 px-6 flex items-center gap-4",children:[r("svg",{class:"w-7 h-7 flex-shrink-0 text-amber-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r("div",{children:[r("h2",{class:"font-semibold text-white text-sm sm:text-base",children:"camerontora.ca services are currently offline"}),r("p",{class:"text-amber-100/80 text-xs sm:text-sm",children:"You've been redirected to this status page. We're working on restoring services."})]})]})})}function re({service:e}){var a,_,o;const t=e.internal,n=e.status==="up",s=(t==null?void 0:t.container_running)&&(t==null?void 0:t.port_responding);let i="down",l=null;n&&s||n&&!s?i="up":!n&&s?(i="network",l="Network/Proxy"):!n&&t&&!s?(i="down",l="Service"):!n&&!t&&(i="down");const c={up:{color:"text-emerald-400",bg:"bg-emerald-400",bgLight:"bg-emerald-400/10 border-emerald-400/20",label:"Operational"},network:{color:"text-amber-400",bg:"bg-amber-400",bgLight:"bg-amber-400/10 border-amber-400/20",label:"Network Issue"},down:{color:"text-red-400",bg:"bg-red-500",bgLight:"bg-red-500/10 border-red-500/20",label:"Down"}},d=c[i]||c.down,h=(o=(_=(a=e.url)==null?void 0:a.replace("https://",""))==null?void 0:_.replace("http://",""))==null?void 0:o.split("/")[0];return r("div",{class:"status-card group",children:[r("div",{class:"flex items-start justify-between mb-3",children:[r("div",{class:"flex-1 min-w-0",children:[r("h3",{class:"font-medium text-white truncate group-hover:text-emerald-400 transition-colors",children:e.name}),r("p",{class:"text-xs text-white/40 truncate mt-0.5",children:h})]}),r("span",{class:`w-2.5 h-2.5 rounded-full ${d.bg} flex-shrink-0 ml-3 mt-1`})]}),r("div",{class:"flex items-center justify-between",children:[r("span",{class:`text-xs font-medium ${d.color} px-2 py-1 rounded-md border ${d.bgLight}`,children:d.label}),e.response_time_ms!==null&&e.response_time_ms!==void 0&&r("span",{class:"text-xs text-white/40 tabular-nums",children:[e.response_time_ms,"ms"]})]}),t&&r("div",{class:"flex items-center gap-4 mt-3 pt-3 border-t border-white/[0.06]",children:[r("span",{class:`flex items-center gap-1.5 text-xs ${t.container_running?"text-emerald-400/80":"text-red-400/80"}`,children:[r("span",{class:`w-1.5 h-1.5 rounded-full ${t.container_running?"bg-emerald-400":"bg-red-400"}`}),"Container"]}),r("span",{class:`flex items-center gap-1.5 text-xs ${t.port_responding?"text-emerald-400/80":"text-red-400/80"}`,children:[r("span",{class:`w-1.5 h-1.5 rounded-full ${t.port_responding?"bg-emerald-400":"bg-red-400"}`}),"Local"]})]}),e.error&&r("p",{class:"text-xs text-red-400/80 mt-2 truncate",title:e.error,children:[l?`${l}: `:"",e.error]})]})}function ot({services:e}){const t=e.filter(i=>i.category==="public"),n=e.filter(i=>i.category==="protected"),s=e.filter(i=>i.category==="api");return r("div",{class:"space-y-10",children:[t.length>0&&r("section",{children:[r("h2",{class:"text-sm font-medium text-white/50 uppercase tracking-wider mb-4 flex items-center gap-2",children:[r("span",{class:"w-2 h-2 rounded-full bg-cyan-400"}),"Public Services"]}),r("div",{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(i=>r(re,{service:i},i.name))})]}),n.length>0&&r("section",{children:[r("h2",{class:"text-sm font-medium text-white/50 uppercase tracking-wider mb-4 flex items-center gap-2",children:[r("span",{class:"w-2 h-2 rounded-full bg-purple-400"}),"Protected Services",r("span",{class:"text-xs font-normal text-white/30 normal-case tracking-normal",children:"(require login)"})]}),r("div",{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map(i=>r(re,{service:i},i.name))})]}),s.length>0&&r("section",{children:[r("h2",{class:"text-sm font-medium text-white/50 uppercase tracking-wider mb-4 flex items-center gap-2",children:[r("span",{class:"w-2 h-2 rounded-full bg-emerald-400"}),"API Services"]}),r("div",{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map(i=>r(re,{service:i},i.name))})]})]})}function ct({metrics:e,realtimeMetrics:t,metricsError:n}){var _,o;if(!e)return r("div",{class:"glass-card p-6 h-full",children:[r("h2",{class:"text-lg font-medium text-white mb-4",children:"System Metrics"}),r("p",{class:"text-white/40 text-sm",children:"Metrics unavailable"})]});const{cpu:s,memory:i,load:l,disks:c}=e,d=((_=t==null?void 0:t.cpu)==null?void 0:_.percent)??(s==null?void 0:s.percent),h=((o=t==null?void 0:t.memory)==null?void 0:o.percent)??(i==null?void 0:i.percent),a=t!==null;return r("div",{class:"glass-card p-6 h-full",children:[r("div",{class:"flex items-center justify-between mb-6",children:[r("h2",{class:"text-lg font-medium text-white",children:"System Metrics"}),a&&!n&&r("span",{class:"text-xs text-emerald-400 flex items-center gap-1.5",children:[r("span",{class:"w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"}),"Live"]}),n&&r("span",{class:"text-xs text-amber-400",title:n,children:"Using cached data"})]}),r("div",{class:"grid grid-cols-2 sm:grid-cols-4 gap-6 mb-8",children:[r(R,{label:"CPU",value:d,unit:"%",thresholds:{warning:70,critical:90},isRealtime:a&&!n}),r(R,{label:"Memory",value:h,unit:"%",thresholds:{warning:70,critical:90},isRealtime:a&&!n}),r(R,{label:"Load (1m)",value:l==null?void 0:l.load_1m,max:(l==null?void 0:l.cpu_count)||4,thresholds:{warning:(l==null?void 0:l.cpu_count)*.7,critical:l==null?void 0:l.cpu_count}}),r(R,{label:"Load (5m)",value:l==null?void 0:l.load_5m,max:(l==null?void 0:l.cpu_count)||4,thresholds:{warning:(l==null?void 0:l.cpu_count)*.7,critical:l==null?void 0:l.cpu_count}})]}),c&&c.length>0&&r("div",{children:[r("h3",{class:"text-xs font-medium text-white/50 uppercase tracking-wider mb-4",children:"Disk Usage"}),r("div",{class:"space-y-4",children:c.map(u=>r(at,{disk:u},u.mount))})]})]})}function R({label:e,value:t,unit:n="",max:s=100,thresholds:i={},isRealtime:l=!1}){const c=t??null,d=c!==null?Math.min(c/s*100,100):0;let h="text-emerald-400",a="stroke-emerald-400";c!==null&&(i.critical&&c>=i.critical?(h="text-red-400",a="stroke-red-400"):i.warning&&c>=i.warning&&(h="text-amber-400",a="stroke-amber-400"));const _=l?"transition-all duration-300":"transition-all duration-500",o=2*Math.PI*28,u=o-d/100*o;return r("div",{class:"text-center",children:[r("div",{class:"relative w-16 h-16 mx-auto mb-3",children:[r("svg",{class:"w-16 h-16 transform -rotate-90",children:[r("circle",{cx:"32",cy:"32",r:"28",stroke:"currentColor","stroke-width":"3",fill:"transparent",class:"text-white/[0.06]"}),r("circle",{cx:"32",cy:"32",r:"28","stroke-width":"3",fill:"transparent","stroke-linecap":"round",class:`${a} ${_}`,style:{strokeDasharray:o,strokeDashoffset:u}})]}),r("div",{class:"absolute inset-0 flex items-center justify-center",children:r("span",{class:`text-sm font-semibold ${h} tabular-nums`,children:c!==null?Math.round(c):"—"})})]}),r("p",{class:"text-xs text-white/50",children:e})]})}function at({disk:e}){const t=e.percent||0;let n="bg-emerald-400",s="text-emerald-400";t>=90?(n="bg-red-400",s="text-red-400"):t>=70&&(n="bg-amber-400",s="text-amber-400");const i=l=>{if(!l)return"0 GB";const c=l/(1024*1024*1024);return c>=1e3?`${(c/1024).toFixed(1)} TB`:`${c.toFixed(1)} GB`};return r("div",{children:[r("div",{class:"flex justify-between text-xs mb-2",children:[r("span",{class:"text-white/70 font-medium",children:e.mount}),r("span",{class:"text-white/40 tabular-nums",children:[i(e.used)," / ",i(e.total),r("span",{class:`ml-2 ${s}`,children:[t,"%"]})]})]}),r("div",{class:"h-1.5 bg-white/[0.06] rounded-full overflow-hidden",children:r("div",{class:`h-full ${n} rounded-full transition-all duration-500`,style:{width:`${t}%`}})})]})}function dt({speedTest:e,adminAuth:t,vpnStatus:n,vpnSwitching:s,vpnMessage:i,onSwitchVpn:l}){if(!e||e.error)return r("div",{class:"glass-card p-6 h-full",children:[r("h2",{class:"text-lg font-medium text-white mb-4",children:"Speed Test"}),r("p",{class:"text-white/40 text-sm",children:(e==null?void 0:e.error)||"Speed test data unavailable"})]});const{home:c,vpn:d}=e,h=t==null?void 0:t.is_admin,a=d&&typeof d=="object"?Object.entries(d).sort(([,o],[,u])=>o!=null&&o.active&&!(u!=null&&u.active)?-1:!(o!=null&&o.active)&&(u!=null&&u.active)?1:0):[],_=o=>n!=null&&n.locations?n.locations.find(u=>u.name.toLowerCase()===o.toLowerCase()):null;return r("div",{class:"glass-card p-6 h-full",children:[r("h2",{class:"text-lg font-medium text-white mb-6",children:"Speed Test"}),r("div",{class:"space-y-6",children:[c&&r(ut,{title:"Home Connection",download:c.download,upload:c.upload,ping:c.ping}),a.length>0&&r("div",{children:[r("h3",{class:"text-xs font-medium text-white/50 uppercase tracking-wider mb-4",children:"VPN Locations"}),r("div",{class:"space-y-3",children:a.map(([o,u])=>r(_t,{location:o,data:u,isAdmin:h,adminInfo:_(o),isSwitching:s===o.toLowerCase(),onSwitch:()=>l(o.toLowerCase())},o))}),(i==null?void 0:i.type)==="error"&&r("div",{class:"mt-3 text-xs text-red-400",children:i.text})]}),e.timestamp&&r("p",{class:"text-xs text-white/30 text-center pt-2",children:["Last tested: ",new Date(e.timestamp).toLocaleString()]})]})]})}function _t({location:e,data:t,isAdmin:n,adminInfo:s,isSwitching:i,onSwitch:l}){const c=(t==null?void 0:t.status)||(t!=null&&t.download?"healthy":"unknown"),d=(t==null?void 0:t.active)===!0,h=n&&!d&&(s==null?void 0:s.healthy)&&!i,a={healthy:{color:"bg-emerald-400",textColor:"text-emerald-400",label:"Healthy"},unhealthy:{color:"bg-red-400",textColor:"text-red-400",label:"Unhealthy"},error:{color:"bg-amber-400",textColor:"text-amber-400",label:"Error"},stopped:{color:"bg-white/30",textColor:"text-white/50",label:"Stopped"},unknown:{color:"bg-white/30",textColor:"text-white/50",label:"Unknown"}},{color:_,textColor:o,label:u}=a[c]||a.unknown;return r("div",{class:`rounded-lg p-3 transition-all duration-200 ${d?"bg-cyan-500/10 border border-cyan-400/30":"bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.05]"}`,children:[r("div",{class:"flex items-center justify-between mb-2",children:[r("div",{class:"flex items-center gap-2",children:[r("span",{class:`w-2 h-2 rounded-full ${_}`}),r("span",{class:"text-white font-medium text-sm",children:e}),d&&r("span",{class:"text-[10px] bg-gradient-to-r from-emerald-500 to-cyan-500 text-black font-medium px-2 py-0.5 rounded-full",children:"Active"})]}),r("span",{class:`text-xs ${o}`,children:u})]}),r("div",{class:"flex items-center justify-between",children:[c==="healthy"&&(t!=null&&t.download)?r("div",{class:"flex items-center gap-4 text-sm",children:[r("div",{class:"flex items-center gap-1.5 text-white/60",children:[r("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),r("span",{class:"tabular-nums",children:[t.download.toFixed(1)," Mbps"]})]}),t.upload&&r("div",{class:"flex items-center gap-1.5 text-white/60",children:[r("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),r("span",{class:"tabular-nums",children:[t.upload.toFixed(1)," Mbps"]})]})]}):r("p",{class:"text-xs text-white/40",children:c==="unhealthy"?"DNS/network issue":c==="stopped"?"Container not running":"No speed data"}),n&&!d&&r("button",{onClick:l,disabled:!h,class:`text-xs px-2 py-1 rounded transition-all ${i?"bg-amber-500/20 text-amber-400 cursor-wait":h?"bg-violet-500/20 text-violet-300 hover:bg-violet-500/30 border border-violet-500/30":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:i?r("span",{class:"flex items-center gap-1",children:[r("svg",{class:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Switching"]}):"Switch"})]})]})}function ut({title:e,download:t,upload:n,ping:s}){return r("div",{children:[r("h3",{class:"text-xs font-medium text-white/50 uppercase tracking-wider mb-3",children:e}),r("div",{class:"grid grid-cols-3 gap-3",children:[r(ne,{label:"Download",value:t,unit:"Mbps",icon:r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),r(ne,{label:"Upload",value:n,unit:"Mbps",icon:r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),r(ne,{label:"Ping",value:s,unit:"ms",icon:r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]})}function ne({label:e,value:t,unit:n,icon:s}){const i=t??"—";return r("div",{class:"bg-white/[0.03] border border-white/[0.06] rounded-lg p-3 text-center",children:[r("div",{class:"text-white/40 mb-2 flex justify-center",children:s}),r("p",{class:"text-lg font-semibold text-white tabular-nums",children:typeof i=="number"?i.toFixed(1):i}),r("p",{class:"text-xs text-white/40",children:n})]})}function ht({dns:e}){const[t,n]=S(typeof localStorage<"u"&&localStorage.getItem("adminKey")||""),[s,i]=S(!1),[l,c]=S(!1),[d,h]=S(null),[a,_]=S(!1),[o,u]=S(null);if(!e||e.error)return r("div",{class:"glass-card p-6",children:[r("h2",{class:"text-lg font-medium text-white mb-4",children:"DNS Status"}),r("p",{class:"text-white/40 text-sm",children:e!=null&&e.error?`Error: ${e.error}`:"DNS information unavailable"})]});const p=e.target==="home",x=e.target!==void 0,y=x?p?"Home Server":"GCP Cloud":"Unknown",w=x?p?"text-emerald-400":"text-amber-400":"text-white/50",m=x?p?"bg-emerald-400":"bg-amber-400":"bg-white/30",g=v=>{n(v),typeof localStorage<"u"&&localStorage.setItem("adminKey",v)},$=v=>{u(v),_(!0)},P=async()=>{_(!1),c(!0),h(null);try{const v=await fetch("/api/dns/failover",{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Key":t},body:JSON.stringify({target:o,reason:"Manual failover from dashboard"})}),N=await v.json();if(!v.ok)throw new Error(N.error||"Failover failed");window.location.reload()}catch(v){h(v.message)}finally{c(!1)}};return r("div",{class:"glass-card p-6",children:[r("div",{class:"flex items-center justify-between mb-6",children:[r("h2",{class:"text-lg font-medium text-white",children:"DNS Status"}),r("div",{class:"flex items-center gap-2",children:[r("span",{class:`w-2.5 h-2.5 rounded-full ${m}`}),r("span",{class:`font-medium text-sm ${w}`,children:y})]})]}),r("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[r("div",{class:"bg-white/[0.03] border border-white/[0.06] rounded-lg p-4",children:[r("p",{class:"text-xs text-white/50 uppercase tracking-wider mb-2",children:"Current IP"}),r("p",{class:"font-mono text-white text-sm",children:e.current_ip||"Unknown"})]}),r("div",{class:"bg-white/[0.03] border border-white/[0.06] rounded-lg p-4",children:[r("p",{class:"text-xs text-white/50 uppercase tracking-wider mb-2",children:"Records Updated"}),r("p",{class:"text-white text-sm",children:[e.record_count||0," A records"]})]})]}),r("div",{class:"border-t border-white/[0.06] pt-6",children:[r("div",{class:"flex items-center justify-between mb-4",children:[r("h3",{class:"text-xs font-medium text-white/50 uppercase tracking-wider",children:"Failover Controls"}),r("button",{onClick:()=>i(!s),class:"text-xs text-cyan-400 hover:text-cyan-300 transition-colors",children:[s?"Hide":"Configure"," Admin Key"]})]}),s&&r("div",{class:"mb-4",children:r("input",{type:"password",value:t,onInput:v=>g(v.target.value),placeholder:"Enter admin key",class:"w-full px-4 py-2.5 bg-white/[0.03] border border-white/[0.1] rounded-lg text-white text-sm placeholder-white/30 focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all"})}),d&&r("div",{class:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:r("p",{class:"text-sm text-red-400",children:d})}),r("div",{class:"flex gap-3",children:[r("button",{onClick:()=>$("home"),disabled:l||p||!t,class:`flex-1 px-4 py-2.5 rounded-lg font-medium text-sm transition-all ${p?"bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 cursor-not-allowed":t?"bg-emerald-500 hover:bg-emerald-400 text-black":"bg-white/[0.03] border border-white/[0.06] text-white/30 cursor-not-allowed"}`,children:p?"Currently Home":"Switch to Home"}),r("button",{onClick:()=>$("gcp"),disabled:l||!p||!t,class:`flex-1 px-4 py-2.5 rounded-lg font-medium text-sm transition-all ${p?t?"bg-amber-500 hover:bg-amber-400 text-black":"bg-white/[0.03] border border-white/[0.06] text-white/30 cursor-not-allowed":"bg-amber-500/10 border border-amber-500/30 text-amber-400 cursor-not-allowed"}`,children:p?"Failover to GCP":"Currently GCP"})]}),!t&&r("p",{class:"text-xs text-white/30 mt-3 text-center",children:"Enter admin key to enable failover controls"})]}),a&&r("div",{class:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:r("div",{class:"glass-card p-6 max-w-md mx-4",children:[r("h3",{class:"text-lg font-medium text-white mb-3",children:"Confirm DNS Failover"}),r("p",{class:"text-white/70 text-sm mb-4",children:["Are you sure you want to switch DNS to"," ",r("span",{class:"font-semibold text-white",children:o==="home"?"Home Server":"GCP Cloud"}),"?"]}),r("p",{class:"text-xs text-white/40 mb-6",children:"This will update all camerontora.ca DNS records. Changes may take up to 10 minutes to propagate."}),r("div",{class:"flex gap-3",children:[r("button",{onClick:()=>_(!1),class:"btn-secondary flex-1",children:"Cancel"}),r("button",{onClick:P,disabled:l,class:`flex-1 px-4 py-2 rounded-lg text-black font-medium transition-all ${o==="gcp"?"bg-amber-500 hover:bg-amber-400":"bg-emerald-500 hover:bg-emerald-400"}`,children:l?"Processing...":"Confirm"})]})]})})]})}function pt({services:e}){const[t,n]=S(24),[s,i]=S({}),[l,c]=S(!0);K(()=>{d()},[t,e]);const d=async()=>{if(!e||e.length===0)return;c(!0);const _={};await Promise.all(e.map(async o=>{try{const u=await fetch(`/api/history?service=${encodeURIComponent(o.name)}&hours=${t}`);u.ok&&(_[o.name]=await u.json())}catch{}})),i(_),c(!1)},h=_=>{if(!_||_.length===0)return[];const o=new Date,u=new Date(o.getTime()-t*60*60*1e3),p=t<=24?48:84,x=t*60*60*1e3/p,y=[];for(let w=0;w<p;w++){const m=new Date(u.getTime()+w*x),g=new Date(m.getTime()+x),$=_.filter(P=>{const v=new Date(P.time);return v>=m&&v<g});if($.length===0)y.push("unknown");else{const P=$.some(v=>v.status==="down");y.push(P?"down":"up")}}return y},a=_=>{switch(_){case"up":return"bg-emerald-400";case"down":return"bg-red-400";default:return"bg-white/10"}};return r("div",{class:"glass-card p-6",children:[r("div",{class:"flex items-center justify-between mb-6",children:[r("h2",{class:"text-lg font-medium text-white",children:"Uptime History"}),r("div",{class:"flex gap-2",children:[r("button",{onClick:()=>n(24),class:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${t===24?"bg-gradient-to-r from-emerald-500 to-cyan-500 text-black":"bg-white/[0.05] border border-white/[0.1] text-white/70 hover:bg-white/[0.1]"}`,children:"24 hours"}),r("button",{onClick:()=>n(168),class:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${t===168?"bg-gradient-to-r from-emerald-500 to-cyan-500 text-black":"bg-white/[0.05] border border-white/[0.1] text-white/70 hover:bg-white/[0.1]"}`,children:"7 days"})]})]}),l?r("div",{class:"space-y-4",children:[1,2,3,4,5].map(_=>r("div",{class:"animate-pulse",children:[r("div",{class:"h-4 bg-white/[0.06] rounded w-28 mb-2"}),r("div",{class:"h-2 bg-white/[0.06] rounded"})]},_))}):r("div",{class:"space-y-5",children:e.map(_=>{const o=s[_.name],u=o?h(o.timeline):[],p=o==null?void 0:o.uptime_percent;return r("div",{children:[r("div",{class:"flex items-center justify-between mb-2",children:[r("span",{class:"text-sm text-white/70",children:_.name}),p!==void 0&&r("span",{class:`text-xs font-medium tabular-nums ${p>=99.5?"text-emerald-400":p>=95?"text-amber-400":"text-red-400"}`,children:[p,"%"]})]}),r("div",{class:"flex gap-px h-2",children:u.length>0?u.map((x,y)=>r("div",{class:`flex-1 rounded-[2px] ${a(x)} transition-colors`,title:`${x==="unknown"?"No data":x}`},y)):r("div",{class:"flex-1 h-2 bg-white/[0.06] rounded text-[10px] text-white/30 flex items-center justify-center",children:"No history yet"})})]},_.name)})}),r("div",{class:"flex justify-between text-xs text-white/30 mt-5",children:[r("span",{children:[t===24?"24 hours":"7 days"," ago"]}),r("span",{children:"now"})]}),r("div",{class:"flex items-center gap-6 mt-5 pt-5 border-t border-white/[0.06]",children:[r("div",{class:"flex items-center gap-2 text-xs text-white/50",children:[r("span",{class:"w-3 h-2 rounded-sm bg-emerald-400"}),r("span",{children:"Operational"})]}),r("div",{class:"flex items-center gap-2 text-xs text-white/50",children:[r("span",{class:"w-3 h-2 rounded-sm bg-red-400"}),r("span",{children:"Down"})]}),r("div",{class:"flex items-center gap-2 text-xs text-white/50",children:[r("span",{class:"w-3 h-2 rounded-sm bg-white/10"}),r("span",{children:"No data"})]})]})]})}const De="https://netdata.camerontora.ca",le="https://health.camerontora.ca";function ft(e){var s;if(!(e!=null&&e.labels)||!((s=e==null?void 0:e.data)!=null&&s[0]))throw new Error("Invalid CPU metrics format");const n=e.data[0].slice(1).reduce((i,l)=>i+(l||0),0);return{percent:Math.round(n*10)/10}}function mt(e){var _;if(!(e!=null&&e.labels)||!((_=e==null?void 0:e.data)!=null&&_[0]))throw new Error("Invalid RAM metrics format");const t=e.labels,n=e.data[0],s=o=>t.indexOf(o),i=n[s("free")]||0,l=n[s("used")]||0,c=n[s("cached")]||0,d=n[s("buffers")]||0,h=i+l+c+d,a=h>0?l/h*100:0;return{percent:Math.round(a*10)/10,used_gb:Math.round(l/1024*10)/10,total_gb:Math.round(h/1024*10)/10,available_gb:Math.round((i+c+d)/1024*10)/10}}function gt(){var E,L;const[e,t]=S(null),[n,s]=S(!0),[i,l]=S(null),[c,d]=S(null),[h,a]=S(null),[_,o]=S(null),[u,p]=S(null),[x,y]=S(null),[w,m]=S(null),[g,$]=S(null),P=async()=>{try{const f=await fetch(`${le}/api/admin/whoami`,{credentials:"include"});if(f.ok){const j=await f.json();p(j),j.is_admin&&v()}else p(null)}catch{p(null)}},v=async()=>{try{const f=await fetch(`${le}/api/admin/vpn/status`,{credentials:"include"});f.ok&&y(await f.json())}catch(f){console.error("Failed to fetch VPN status:",f)}},N=async f=>{if(confirm(`Switch Transmission to ${f}?

This will briefly interrupt active downloads.`)){m(f),$(null);try{const j=await fetch(`${le}/api/admin/vpn/switch`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:f})}),Q=await j.json();j.ok?(async(Z=20)=>{var B,fe,me;for(let ge=0;ge<Z;ge++){await new Promise(T=>setTimeout(T,1500));const xe=await fetch("/api/status");if(xe.ok){const T=await xe.json();t(T),d(new Date);const We=f.charAt(0).toUpperCase()+f.slice(1),ee=(me=(fe=(B=T==null?void 0:T.metrics)==null?void 0:B.speed_test)==null?void 0:fe.vpn)==null?void 0:me[We];if(ee!=null&&ee.active){m(null),v();return}}}m(null)})():($({type:"error",text:Q.error||"Switch failed"}),m(null))}catch(j){$({type:"error",text:j.message}),m(null)}}},F=async()=>{try{const f=await fetch("/api/status");if(!f.ok)throw new Error("Failed to fetch status");const j=await f.json();t(j),d(new Date),l(null)}catch(f){l(f.message)}finally{s(!1)}},H=async()=>{try{const[f,j]=await Promise.all([fetch(`${De}/api/metrics/cpu`),fetch(`${De}/api/metrics/ram`)]);if(!f.ok||!j.ok)throw new Error("Netdata metrics endpoint unavailable");const[Q,pe]=await Promise.all([f.json(),j.json()]),Z=ft(Q),B=mt(pe);a({cpu:Z,memory:B,timestamp:new Date}),o(null)}catch(f){console.error("Real-time metrics error:",f.message),o(f.message)}};if(K(()=>{F(),P();const f=setInterval(F,3e4);return()=>clearInterval(f)},[]),K(()=>{H();const f=setInterval(H,1e4);return()=>clearInterval(f)},[]),K(()=>{if(!(u!=null&&u.is_admin))return;const f=setInterval(v,3e4);return()=>clearInterval(f)},[u]),n&&!e)return r("div",{class:"min-h-screen flex items-center justify-center",children:r("div",{class:"text-center",children:[r("div",{class:"relative w-16 h-16 mx-auto mb-6",children:[r("div",{class:"absolute inset-0 rounded-full border-2 border-white/10"}),r("div",{class:"absolute inset-0 rounded-full border-2 border-emerald-400 border-t-transparent animate-spin"})]}),r("p",{class:"text-white/60 text-sm",children:"Loading status..."})]})});const M=((E=e==null?void 0:e.dns)==null?void 0:E.target)==="gcp";return r("div",{class:"min-h-screen",children:[M&&r(st,{}),r("div",{class:"max-w-7xl mx-auto px-6 py-10",children:[r(it,{status:e,lastUpdate:c,adminAuth:u}),i&&r("div",{class:"glass-card border-red-500/30 bg-red-500/10 p-4 mb-8",children:r("div",{class:"flex items-center gap-3",children:[r("svg",{class:"w-5 h-5 text-red-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r("p",{class:"text-red-200 text-sm",children:i})]})}),r("div",{class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[r("div",{class:"lg:col-span-2",children:r(ct,{metrics:e==null?void 0:e.metrics,realtimeMetrics:h,metricsError:_})}),r("div",{children:r(dt,{speedTest:(L=e==null?void 0:e.metrics)==null?void 0:L.speed_test,adminAuth:u,vpnStatus:x,vpnSwitching:w,vpnMessage:g,onSwitchVpn:N})})]}),r("div",{class:"mb-8",children:r(ht,{dns:e==null?void 0:e.dns})}),r(ot,{services:(e==null?void 0:e.services)||[]}),r("div",{class:"mt-8",children:r(pt,{services:(e==null?void 0:e.services)||[]})})]}),r("footer",{class:"text-center py-8 border-t border-white/[0.06]",children:[r("p",{class:"text-white/40 text-sm",children:"camerontora.ca Status Dashboard"}),c&&r("p",{class:"text-white/30 text-xs mt-2",children:["Last updated: ",c.toLocaleTimeString()]})]})]})}Ze(r(gt,{}),document.getElementById("app"));
